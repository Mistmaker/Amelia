<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-info">
                        <h4 class="card-title ">Producto</h4>
                        <p class="card-category"> Creación/Mantenimiento de productos</p>
                    </div>
                    <div class="text-right mr-3">
                        <button routerLink="/productos" class="btn btn-info mt-1">
                            <i class="fas fa-long-arrow-alt-left"></i> Regresar
                        </button>
                    </div>
                    <div class="card-body">

                        <form (ngSubmit)="f.form.valid &&guardar( f )" #f="ngForm">

                            <div class="form-group">
                                <label>Código</label>
                                <input type="text" class="form-control" [(ngModel)]="producto.ART_NOMBREC" name="codigo"
                                    placeholder="" maxlength="25" required>
                            </div>

                            <div class="form-group">
                                <label>Nombre</label>
                                <input type="text" class="form-control" [(ngModel)]="producto.ART_NOMBRE" name="nombre"
                                    placeholder="Nombre" minlength="1" #nombre="ngModel" required>
                                <div *ngIf="f.submitted && nombre.invalid" class="alert bg-warning">

                                    <div *ngIf="nombre.errors.required">
                                        Nombre requeridos
                                    </div>
                                    <div *ngIf="nombre.errors.minlength">
                                        Debe tener mínimo 1 letra
                                    </div>
                                    <div *ngIf="nombre.errors.forbiddenName">
                                        No puede colocar ese nombre
                                    </div>

                                </div>
                            </div>

                            <div class="form-group" *ngIf="grupoProductos.length > 0">
                                <label for="grupo">Grupo:</label>
                                <select [(ngModel)]="producto.GRUP_CODIGO" class="form-control" name="grupo" required>
                                    <option *ngFor="let grupo of grupoProductos" [value]="grupo.GRUP_CODIGO"> {{
                                        grupo.GRUP_NOMBRE }} </option>
                                </select>
                            </div>


                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>Modelo</label>
                                            <input type="text" class="form-control form-control-sm"
                                                [(ngModel)]="producto.ART_MODELO" name="modelo" placeholder="Modelo">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>Observación</label>
                                            <input type="text" class="form-control form-control-sm"
                                                [(ngModel)]="producto.ART_OBSERVACION" name="observacion"
                                                placeholder="Observación">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="iva">Grava IVA:</label>
                                            <select [(ngModel)]="producto.ART_TRIBUTAIVA"
                                                class="form-control form-control-sm" name="iva" required>
                                                <option value="S"> Si </option>
                                                <option value="N"> No </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-6">
                                    <div class="card">
                                        <div class="card-header">Precios</div>
                                        <div class="card-body">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th class="lista">Lista</th>
                                                        <th class="precio">Precio</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let precio of precios">
                                                        <td scope="row">
                                                            <div class="form-group">
                                                                <select [(ngModel)]="precio.ARTPRE_CODIGO" [ngModelOptions]="{standalone: true}" name="tipoPrecio" class="form-control form-control-sm" name="" id="">
                                                                    <option *ngFor="let tipo of tipoPrecios" [value]="tipo.id_tipre"> {{ tipo.tipre_nombre }}</option>
                                                                </select>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="form-group">
                                                                <input type="number" class="form-control form-control-sm" name="" placeholder="0" [value]="precio.ARTPRE_PRECIO">
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <div class="form-group">
                                <label>Activo</label>
                                <button *ngIf="producto.ART_ACTIVO === '1'" (click)="producto.ART_ACTIVO = '0'"
                                    class="btn btn-outline-success w-50" type="button">
                                    Activo
                                </button>
                                <button *ngIf="producto.ART_ACTIVO === '0'" (click)="producto.ART_ACTIVO = '1'"
                                    class="btn btn-outline-danger w-50" type="button">
                                    Inactivo
                                </button>
                            </div>

                            <hr>
                            <div class="form-group text-center">
                                <button class="btn btn-primary w-50" type="submit">
                                    <i class="fas fa-save"></i> Guardar
                                </button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>