<div class="card">
    <div class="card-header card-header-info">
        <h4 class="card-title ">Actividades generadas</h4>
        <p class="card-category"></p>
    </div>

    <div class="card-body">
        <div class="row mb-3">
            <div class="col-md-4">
                <div class="input-group">
                    <input type="text" class="form-control form-control-sm" readonly [(ngModel)]="cliente.CLI_NOMBRE"
                        placeholder="Buscar...">
                    <button (click)="abrirModal()" class="btn btn-sm btn-primary"><i class="fas fa-search"></i></button>
                </div>
                <p style="font-size: 0.7rem;"> &nbsp; {{ cliente.TipoCliente }} </p>
            </div>
            <div class="col-md-2">
                <select class="form-select form-select-sm" [(ngModel)]="periodo" id="periodo">
                    <option value="2019">2019</option>
                    <option value="2020">2020</option>
                    <option value="2021" selected>2021</option>
                </select>
            </div>
            <div class="form-group col-md-3" id="data_1">
                <div class="input-group date">
                    <span class="input-group-text"><i class="fas fa-calendar"></i></span><input type="date"
                        [(ngModel)]="fecha" class="form-control form-control-sm" id="fecha">
                </div>
            </div>
            <div class="col-md-2">
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button (click)="crearAgenda()" [disabled]="!cliente.CLI_CODIGO" class="btn btn-sm btn-primary"><i
                            class="fas fa-plus"></i> Crear agenda</button>
                </div>
                <!-- <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-1">
                    <button  class="btn btn-sm btn-secondary"><i
                            class="fas fa-plus"></i> Tarea manual</button>
                </div> -->
            </div>
        </div>

        <hr>

        <div class="row mb-3">
            <div class="col-md-6">
                <div class="input-group">
                    <input type="text" class="form-control form-control-sm" #busqueda [(ngModel)]="textoBusqueda"
                        placeholder="Buscar...">
                    <button (click)="limpiarBusqueda()" [disabled]="textoBusqueda.length==0"
                        class="btn btn-sm btn-primary"><i class="fas fa-backspace"></i></button>
                </div>
            </div>
        </div>

        <div class="table-responsive">
            <table *ngIf="!cargando  && agendaActividades.length > 0"
                class="table table-striped table-hover animated fadein faster">
                <thead class="text-primary">
                    <th>Ruc</th>
                    <th>Razon Social</th>
                    <th>Periodo</th>
                    <th>Creaci√≥n</th>
                    <th>Acciones</th>
                </thead>
                <tbody>
                    <tr
                        *ngFor="let a of agendaActividades | filtroSimple: textoBusqueda | paginate : {itemsPerPage: tableSize,currentPage: page,totalItems: count}; let i = index;">
                        <td>{{ a.ruc }} </td>
                        <td>{{ a.cliente }} </td>
                        <td>{{ a.periodo }} </td>
                        <td>{{ a.creado }} </td>
                        <td>
                            <button class="btn btn-sm btn-danger mr-1" (click)="eliminar(a.ruc,a.periodo,i)"><i
                                    class="fa fa-trash"></i></button>
                        </td>

                    </tr>
                </tbody>
            </table>
            <div *ngIf="!cargando && agendaActividades.length !== 0" class="d-flex justify-content-center">
                <pagination-controls previousLabel="Prev" nextLabel="Next" (pageChange)="onTableDataChange($event)">
                </pagination-controls>
            </div>
        </div>

        <div *ngIf="cargando" class="alert alert-info text-center mt-3 animated fadein faster">
            <h4 class="alert-heading">Cargando</h4>
            <p><i class="fa fa-sync-alt fa-spin fa-3x"></i></p>
            <p class="mb-0"> Espere por favor</p>
        </div>
        <div *ngIf="!cargando && agendaActividades.length === 0"
            class="alert alert-warning text-center mt-3 animated fadein faster">
            <h4 class="alert-heading">No hay registros</h4>
            <p><i class="fa fa-exclamation fa-3x"></i></p>
        </div>

    </div>
</div>