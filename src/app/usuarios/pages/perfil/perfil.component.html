<div class="card">
    <div class="card-header card-header-info">
        <h4 class="card-title">Perfiles de usuario</h4>
        <p class="card-category">Creación/Mantenimiento de usuarios</p>
    </div>

    <div class="card-body">
        <div class="text-right mr-3">
            <button routerLink="/usuarios/perfiles" class="btn btn-primary mt-1">
                <i class="fas fa-long-arrow-alt-left"></i> Regresar
            </button>
        </div>
        <form (ngSubmit)="f.form.valid && guardar(f)" #f="ngForm">
            <div class="form-group">
                <label>Código *</label>
                <input [(ngModel)]="perfil.PERFIL_CODIGO" name="codigo" #codigo="ngModel"
                    placeholder="código del perfil" type="text" class="form-control" minlength="3" maxlength="10"
                    required [disabled]="perfilExistente">
                <div *ngIf="f.submitted && codigo.invalid" class="alert bg-warning">
                    <div *ngIf="codigo.errors.required">codigo requerido</div>
                    <div *ngIf="codigo.errors.minlength">Debe tener mínimo 3 letras</div>
                    <div *ngIf="codigo.errors.forbiddenName">
                        No puede colocar ese nombre
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Nombre *</label>
                <input [(ngModel)]="perfil.PERFIL_NOMBRE" name="name" #name="ngModel" placeholder="Nombre del perfil"
                    type="text" class="form-control" minlength="4" maxlength="100" required />
                <div *ngIf="f.submitted && name.invalid" class="alert bg-warning">
                    <div *ngIf="name.errors.required">Contraseña requerida</div>
                    <div *ngIf="name.errors.minlength">Debe tener mínimo 4 letras</div>
                    <div *ngIf="name.errors.forbiddenName">
                        No puede colocar ese nombre
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Vista Clientes *</label>
                <select [(ngModel)]="perfil.PERFIL_CLIENTES" name="asesor" #perfcliente="ngModel"
                    class="form-control form-control-sm" required>
                    <option value="T"> Todos </option>
                    <option value="A"> Solo Asignados </option>
                </select>
                <div *ngIf="f.submitted && perfcliente.invalid" class="alert bg-warning">
                    <div *ngIf="perfcliente.errors.required">Opción requerida</div>
                </div>
            </div>
            <hr />
            <div class="form-group text-center">
                <button class="btn btn-primary w-50" type="submit">
                    <i class="fas fa-save"></i> Guardar
                </button>
                <button *ngIf="perfilExistente" (click)="eliminar()" class="btn btn-danger w-50" type="button">
                    <i class="fas fa-trash-alt"></i> Borrar
                </button>
            </div>
        </form>
    </div>
</div>